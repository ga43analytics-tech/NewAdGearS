<!doctype html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3L0E1BC6SK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3L0E1BC6SK');
</script>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AdventureGear — Checkout</title>
<meta name="description" content="Checkout / Payment simulation" />
<style>
  :root{--bg:#f7fafc;--card:#fff;--accent:#0ea5a6;--text:#0f1724;--muted:#6b7280}
  body{margin:0;font-family:Inter,Arial,sans-serif;background:var(--bg);color:var(--text)}
  .container{max-width:820px;margin:28px auto;padding:0 20px}
  .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 12px 30px rgba(12,18,24,.06)}
  .cart-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed #e6edf3}
  label{display:block;margin-top:12px;color:var(--muted)}
  input,select{width:100%;padding:10px;border-radius:8px;border:1px solid #e6edf3;margin-top:6px}
  .btn{background:var(--accent);color:#052a2a;padding:10px 14px;border-radius:10px;border:none;font-weight:700}
</style>
</head>
<body>
<main class="container">
  <h1>Checkout</h1>

  <div class="card" id="checkoutCard">
    <div id="cartItems">Loading cart…</div>

    <form id="checkoutForm" style="margin-top:14px">
      <label>Full name
        <input id="fullname" type="text" required placeholder="Your name">
      </label>

      <label>Email
        <input id="email" type="email" required placeholder="you@example.com">
      </label>

      <label>Payment method
        <select id="paymentMethod">
          <option value="card">Credit / Debit Card</option>
          <option value="upi">UPI</option>
          <option value="cod">Cash on Delivery</option>
        </select>
      </label>

      <div style="margin-top:14px">
        <button class="btn" id="checkout-btn" type="submit">Pay (Simulated)</button>
      </div>
    </form>

    <p style="color:var(--muted);font-size:13px;margin-top:12px">This is a simulated checkout for testing tags — no real payment is processed.</p>
  </div>
</main>

<script>
(function(){
  const KEY = 'ag_cart_v2';
  function readCart(){ try { return JSON.parse(localStorage.getItem(KEY) || '[]'); } catch(e){ return []; } }
  function clearCart(){ localStorage.removeItem(KEY); }
  function renderCart(){
    const cart = readCart();
    const container = document.getElementById('cartItems');
    if(!container) return;
    if(cart.length === 0){
      container.innerHTML = '<div>Your cart is empty. <a href="products.html">Shop now</a></div>';
      document.getElementById('checkout-btn').disabled = true;
      return;
    }
    let total = 0;
    container.innerHTML = cart.map(i=>{
      total += (i.price || 0) * (i.qty || 1);
      return `<div class="cart-row"><div>${i.name} × ${i.qty}</div><div>₹${(i.price||0)*(i.qty||1)}</div></div>`;
    }).join('') + `<div style="margin-top:8px;font-weight:800">Total: ₹${total}</div>`;
    document.getElementById('checkout-btn').textContent = 'Pay ₹' + total + ' (Simulate)';
  }

  document.addEventListener('DOMContentLoaded', ()=>{
    renderCart();

    document.getElementById('checkoutForm').addEventListener('submit', function(e){
      e.preventDefault();
      const cart = readCart();
      if(cart.length === 0) return alert('Cart is empty');

      const total = cart.reduce((s,i)=>s+(i.price||0)*(i.qty||1),0);
      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        event:'purchase',
        value: total,
        currency: 'INR',
        items: cart
      });

      // clear cart and redirect to thankyou
      clearCart();
      setTimeout(()=> location.href = 'thankyou.html', 600);
    });
  });
})();
</script>
</body>
</html>
